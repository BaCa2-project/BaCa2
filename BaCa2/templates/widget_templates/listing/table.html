{% load custom_tags %}
{% load i18n %}

<div class="table-wrapper" data-table-id="{{ table_widget.name }}">

    <div class="table-widget-forms-wrapper">
        {% if table_widget.allow_delete %}
            <div class="table-widget-form delete-record-form"
                 data-table-id="{{ table_widget.name }}">
                {% with table_widget.delete_record_form_widget as form_widget %}
                    {% include 'widget_templates/forms/default.html' %}
                {% endwith %}
            </div>
        {% endif %}
    </div>

    <div class="card">

        {% if table_widget.display_util_header %}
            {% include 'widget_templates/listing/table_util_header.html' %}
            <hr class="m-0">
        {% endif %}

        <div class="card-body {% if table_widget.resizable_height %} pb-0 {% endif %}">
            {% if table_widget.resizable_height %}
                <div class="resize-wrapper" style="height: {{ table_widget.table_height }}">
            {% endif %}
            <div class="table-responsive"
                {% if table_widget.paging != "false" %}
                 data-paging="true"
                {% else %}
                 data-paging="false"
                {% endif %}>
                <table class="{{ table_widget.widget_class }}"
                       id="{{ table_widget.name }}"
                       data-deselect-on-filter="{{ table_widget.deselect_on_filter }}"
                       style="width:100%">
                    <thead>
                        <tr>
                            {% for col in table_widget.cols %}
                                {% include col.template %}
                            {% endfor %}
                        </tr>
                    </thead>
                </table>
            </div>
            {% if table_widget.resizable_height %}
                </div>
            {% endif %}
        </div>

        {% if table_widget.resizable_height %}
            <div class="text-center text-sm resize-handle p-0">
                <small>
                    {% trans "resize" %}
                </small>
            </div>
        {% endif %}
    </div>
</div>


<script type="text/javascript">
    initTable({{ table_widget.js_context|safe }});
</script>
